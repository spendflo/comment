"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const VersionedDataKinds_1 = require("../../store/VersionedDataKinds");
/**
 * @internal
 */
class TestDataSource {
    constructor(featureStore, flags, segments, onStop) {
        this.featureStore = featureStore;
        this.flags = flags;
        this.segments = segments;
        this.onStop = onStop;
    }
    async start(fn) {
        await this.featureStore.init({
            [VersionedDataKinds_1.default.Features.namespace]: Object.assign({}, this.flags),
            [VersionedDataKinds_1.default.Segments.namespace]: Object.assign({}, this.segments),
        });
        fn === null || fn === void 0 ? void 0 : fn();
    }
    stop() {
        this.onStop(this);
    }
    close() {
        this.stop();
    }
    async upsert(kind, value) {
        return this.featureStore.upsert(kind, value);
    }
}
exports.default = TestDataSource;
//# sourceMappingURL=TestDataSource.js.map