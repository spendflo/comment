System.register([],function(M){"use strict";return{execute:function(){M("atom",L);let K=0;function L(r,a){const h=`atom${++K}`,v={toString:()=>h};return typeof r=="function"?v.read=r:(v.init=r,v.read=N,v.write=R),a&&(v.write=a),v}function N(r){return r(this)}function R(r,a,h){return a(this,typeof h=="function"?h(r(this)):h)}const p=(r,a)=>r.unstable_is?r.unstable_is(a):a===r,D=r=>"init"in r,O=r=>!!r.write,S=new WeakMap,T=(r,a)=>{S.set(r,a),r.catch(()=>{}).finally(()=>S.delete(r))},_=(r,a)=>{const h=S.get(r);h&&(S.delete(r),h(a))},C=(r,a)=>{r.status="fulfilled",r.value=a},q=(r,a)=>{r.status="rejected",r.reason=a},U=r=>typeof(r==null?void 0:r.then)=="function",m=(r,a)=>!!r&&"v"in r&&"v"in a&&Object.is(r.v,a.v),B=(r,a)=>!!r&&"e"in r&&"e"in a&&Object.is(r.e,a.e),w=r=>!!r&&"v"in r&&r.v instanceof Promise,V=(r,a)=>"v"in r&&"v"in a&&r.v.orig&&r.v.orig===a.v.orig,y=r=>{if("e"in r)throw r.e;return r.v},$=M("createStore",()=>{const r=new WeakMap,a=new WeakMap,h=new Map,v=t=>r.get(t),F=(t,n)=>{const s=r.get(t);if(r.set(t,n),h.has(t)||h.set(t,s),w(s)){const i="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);s.v!==i&&_(s.v,i)}},G=(t,n,s,i)=>{const c=new Map(i?n.d:null);let l=!1;s.forEach((e,o)=>{!e&&p(t,o)&&(e=n),e&&(c.set(o,e),n.d.get(o)!==e&&(l=!0))}),(l||n.d.size!==c.size)&&(n.d=c)},A=(t,n,s,i)=>{const c=v(t),l={d:(c==null?void 0:c.d)||new Map,v:n};if(s&&G(t,l,s,i),m(c,l)&&c.d===l.d)return c;if(w(c)&&w(l)&&V(c,l)){if(c.d===l.d)return c;l.v=c.v}return F(t,l),l},H=(t,n,s,i)=>{if(U(n)){let c;const l=()=>{const o=v(t);if(!w(o)||o.v!==e)return;const u=A(t,e,s);a.has(t)&&o.d!==u.d&&J(t,u,o.d)},e=new Promise((o,u)=>{let f=!1;n.then(d=>{f||(f=!0,C(e,d),o(d),l())},d=>{f||(f=!0,q(e,d),u(d),l())}),c=d=>{f||(f=!0,d.then(g=>C(e,g),g=>q(e,g)),o(d))}});return e.orig=n,e.status="pending",T(e,o=>{o&&c(o),i==null||i()}),A(t,e,s,!0)}return A(t,n,s)},x=(t,n,s)=>{const i=v(t),c={d:(i==null?void 0:i.d)||new Map,e:n};return s&&G(t,c,s),B(i,c)&&i.d===c.d?i:(F(t,c),c)},E=(t,n)=>{const s=v(t);if(!n&&s&&(a.has(t)||Array.from(s.d).every(([f,d])=>{if(p(t,f))return!0;const g=E(f);return g===d||m(g,d)})))return s;const i=new Map;let c=!0;const l=f=>{if(p(t,f)){const g=v(f);if(g)return i.set(f,g),y(g);if(D(f))return i.set(f,void 0),f.init;throw new Error("no atom init")}const d=E(f);return i.set(f,d),y(d)};let e,o;const u={get signal(){return e||(e=new AbortController),e.signal},get setSelf(){return!o&&O(t)&&(o=(...f)=>{if(!c)return k(t,...f)}),o}};try{const f=t.read(l,u);return H(t,f,i,()=>e==null?void 0:e.abort())}catch(f){return x(t,f,i)}finally{c=!1}},Q=t=>y(E(t)),X=t=>{let n=a.get(t);return n||(n=P(t)),n},z=(t,n)=>!n.l.size&&(!n.t.size||n.t.size===1&&n.t.has(t)),Y=t=>{const n=a.get(t);n&&z(t,n)&&j(t)},Z=t=>{const n=new Map,s=new WeakMap,i=e=>{var o;const u=new Set((o=a.get(e))==null?void 0:o.t);return h.forEach((f,d)=>{var g;(g=v(d))!=null&&g.d.has(e)&&u.add(d)}),u},c=e=>{i(e).forEach(o=>{o!==e&&(n.set(o,(n.get(o)||new Set).add(e)),s.set(o,(s.get(o)||0)+1),c(o))})};c(t);const l=e=>{i(e).forEach(o=>{var u;if(o!==e){let f=s.get(o);if(f&&s.set(o,--f),!f){let d=!!((u=n.get(o))!=null&&u.size);if(d){const g=v(o),tt=E(o,!0);d=!m(g,tt)}d||n.forEach(g=>g.delete(o))}l(o)}})};l(t)},I=(t,...n)=>{let s=!0;const i=e=>y(E(e)),c=(e,...o)=>{let u;if(p(t,e)){if(!D(e))throw new Error("atom not writable");const f=v(e),d=H(e,o[0]);m(f,d)||Z(e)}else u=I(e,...o);return s||W(),u},l=t.write(i,c,...n);return s=!1,l},k=(t,...n)=>{const s=I(t,...n);return W(),s},P=(t,n,s)=>{var i;const c=s||[];(i=v(t))==null||i.d.forEach((e,o)=>{const u=a.get(o);u?u.t.add(t):o!==t&&P(o,t,c)}),E(t);const l={t:new Set(n&&[n]),l:new Set};if(a.set(t,l),O(t)&&t.onMount){const{onMount:e}=t;c.push(()=>{const o=e((...u)=>k(t,...u));o&&(l.u=o)})}return s||c.forEach(e=>e()),l},j=t=>{var n;const s=(n=a.get(t))==null?void 0:n.u;s&&s(),a.delete(t);const i=v(t);i&&(w(i)&&_(i.v),i.d.forEach((c,l)=>{if(l!==t){const e=a.get(l);e&&(e.t.delete(t),z(l,e)&&j(l))}}))},J=(t,n,s)=>{const i=new Set(n.d.keys()),c=new Set;s==null||s.forEach((l,e)=>{if(i.has(e)){i.delete(e);return}c.add(e);const o=a.get(e);o&&o.t.delete(t)}),i.forEach(l=>{const e=a.get(l);e?e.t.add(t):a.has(t)&&P(l,t)}),c.forEach(l=>{const e=a.get(l);e&&z(l,e)&&j(l)})},W=()=>{for(;h.size;){const t=Array.from(h);h.clear(),t.forEach(([n,s])=>{const i=v(n);if(i){const c=a.get(n);c&&i.d!==(s==null?void 0:s.d)&&J(n,i,s==null?void 0:s.d),c&&!(!w(s)&&(m(s,i)||B(s,i)))&&c.l.forEach(l=>l())}})}};return{get:Q,set:k,sub:(t,n)=>{const s=X(t);W();const i=s.l;return i.add(n),()=>{i.delete(n),Y(t)}}}});let b;const et=M("getDefaultStore",()=>(b||(b=$()),b))}}});
